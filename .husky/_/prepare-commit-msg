#!/usr/bin/env sh

# ì»¤ë°‹ ë©”ì‹œì§€ì˜ ì²« ë²ˆì§¸ ì¤„ ì¶”ì¶œ
commit_msg=$(head -n 1 "$1")

# í—ˆìš©ëœ commit-tag
valid_tags="feat|design|fix|docs|style|refactor|test|chore|etc|rename|remove"

ex_tags=$(echo $valid_tags | sed 's/|/: ,/g'):;

# ì»¤ë°‹ ë©”ì‹œì§€ì˜ ì•ë¶€ë¶„ì—ì„œ commit-tagë§Œ ê²€ì‚¬
if [[ ! $commit_msg =~ ^($valid_tags):\ .+ ]]; then
  echo "ğŸš¨ [ERROR] Commit message does not follow commit convention"
  echo ""
  echo "Allowed prefixes: $ex_tags"
  echo ""
  echo "Example: \"feat: add login feature\""
  echo ""
  exit 1
fi

echo "âœ… [SUCCESS] Thank you for follow commit convention"